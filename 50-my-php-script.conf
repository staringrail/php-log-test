# /etc/rsyslog.d/10-my-php-script.conf

# Filter: Route PHP application error logs to a dedicated file.
# This rule specifically targets logs from the 'my_php_app' program (identifier set in PHP's openlog()).
# It matches messages where:
#   - $programname is exactly 'my_php_app'
#   - $syslogseverity is '3' (which is the numeric code for LOG_ERR severity,
#     as seen by rsyslog from PHP's syslog() function).
#
# Action:
#   - Logs matching these criteria are written to /var/log/php_logs/my_php_script.log.
#   - The 'stop' action prevents these logs from being processed by any subsequent
#     rsyslog rules, avoiding duplication in default log files like /var/log/syslog.

if $programname == 'my_php_app' and $syslogseverity == '3' then {
    action(type="omfile" file="/var/log/php_logs/my_php_script.log")
    stop
}